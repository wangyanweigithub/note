## 浅谈C/C++中的static和extern关键字

### 原理
1. 首先，关于声明和定义的区别。
	1. 只有分配存储空间的变量声明才叫变量定义，其实函数也是一样，
	2. 编译器只有见到函数定义才会生成指令，而指令在程序运行时当然也要占存储空间。
	3. 那么没有函数体的函数声明有什么用呢？
		1. 它为编译器提供了有用的信息，编译器在翻译代码的过程中，只有见到函数原型（不管带不带函数体）
			之后才知道这个函数的名字、参数类型和返回值，这样碰到函数调用时才知道怎么生成相应的指令，
			所以函数原型必须出现在函数调用之前，这也是遵循“先声明后使用”的原则。

2. 标识符的链接属性（Linkage）有三种

	1. 外部链接（ExternalLinkage）

		如果最终的可执行文件由多个程序文件链接而成，一个标识符在任意程序文件中即使声明
		多次也都代表同一个变量或函数，则这个标识符具有External Linkage。具有External
		Linkage的标识符编译后在符号表中是GLOBAL的符号。

	2. 内部链接（InternalLinkage）

		如果一个标识符在某个程序文件中即使声明多次也都代表同一个变量或函数，则这个标识
		符具有Internal Linkage。具有Internal Linkage的标识符编译后在符号表中是LOCAL的符号。

	3. 无链接（NoLinkage）

		除以上情况之外的标识符都属于No Linkage的，例如函数的局部变量，以及不表示变量和
		函数的其它标识符。

3. 声明和定义的次数限制

	1. 凡是被多次声明的变量或函数，必须有且只有一个声明是定义，如果有多个定义，
		或者一个定义都没有，链接器就无法完成链接。显然，声明可以有很多次。


### static: 
0. <font color=red>静态成员只初始化一次，所以再次调用函数，函数的局部static变量不会再次初始化。</font>

	当编译器处理函数内部static静态变量时，遇到静态变量的初始化，就会在函数f外单独生成一条命令，给j赋值为0. 这些命令甚至会在函数调用以前就执行

1. 在C中，static主要定义全局静态变量、定义局部静态变量、定义静态函数。

	1. 定义全局静态变量：在全局变量前面加上关键字static，该全局变量变成了全局静态变量。全局静态变量有以下特点。

		- 在全局区分配内存。

		- 如果没有初始化，其默认值为0.

		- 该变量在本文件内从定义开始到文件结束可见。

	2. 定义局部静态变量：在局部变量前面加上关键字static，其特点如下：

		- 该变量在全局数据区分配内存。

		- 它始终驻留在全局数据区，直到程序运行结束。

		- 其作用域为局部作用域，当定义它的函数或语句块结束时，其作用域随之结束。

	3. 定义静态函数：在函数返回类型前加上static关键字，函数即被定义为静态函数，其特点如下：

		- 静态函数只能在本源文件中使用

		- 在文件作用域中声明的inline函数默认为static类型

2. 在C++中新增了两种作用：定义静态数据成员或静态函数成员。

	1. 定义静态数据成员。

		- 内存分配：静态数据成员在程序的全局数据区分配。

		- 初始化和定义：静态数据成员定义时要分配空间，所以不能在类声明中定义。

			静态数据成员因为程序以开始运行就必须存在，所以其初始化的最佳位置在类
			的内部，public、protected、private关键字对它的限定和普通数据成员一样，因为其空
			间在全局数据分配，属于所有本类的对象共享。它不属于特定的类对象，在没产生类对象
			时，其作用域可见，即没有产生类的实例时，就可以操作它了。

			静态成员函数。静态成员函数与类相联系，不与类的对象相联系。静态成员函数不能访问
			非静态数据成员。

### extern
1. extern可以置于变量或函数前，以在别的文件中标识变量或函数的定义，并提示编译器遇到此变量或函数时在其他模块中寻找其定义。
2. extern是C、C++语言中表明函数和全局变量作用范围（可见性）的关键字。
3. 对于extern变量来说，仅仅是一个变量的声明，其并不是定义，不会分配内存空间。
4. extern表示将变量或函数声明为外部链接，变量默认是内部链接，函数默认是外部链接。
	因此用来外部链接的函数，声明时有无extern都可以连接通过。而全局变量则不行。
5. 通常，在模块的头文件中，对本模块提供给其他模块引用的函数和全局变量以关键字extern声明。